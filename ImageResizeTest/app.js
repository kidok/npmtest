var fs = require('fs');

var data = 'data:image/png;base64,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';

function decodeBase64Image(dataString) {
    var matches = dataString.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/),
        response = {};

    if (matches.length !== 3) {
        return new Error('Invalid input string');
    }

    response.type = matches[1];
    response.data = new Buffer(matches[2], 'base64');

    return response;
}

var imageBuffer = decodeBase64Image(data);
console.log(imageBuffer);

fs.writeFile('test.jpg', imageBuffer.data, function(err) {});